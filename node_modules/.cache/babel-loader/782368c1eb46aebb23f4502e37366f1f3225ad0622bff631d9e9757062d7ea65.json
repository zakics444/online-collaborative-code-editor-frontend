{"ast":null,"code":"var _jsxFileName = \"C:\\\\project final\\\\frontend\\\\src\\\\components\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Editor = () => {\n  _s();\n  const {\n    projectName,\n    pjpassword\n  } = useParams();\n  const [code, setCode] = useState('');\n  const [socket, setSocket] = useState(null);\n  useEffect(() => {\n    const newSocket = io('http://localhost:5000'); // adjust if needed\n    setSocket(newSocket);\n\n    // Join the project room\n    newSocket.emit('joinProject', {\n      projectName,\n      pjpassword\n    });\n\n    // Listen for code updates\n    newSocket.on('codeUpdate', newCode => {\n      setCode(newCode);\n    });\n    return () => {\n      newSocket.disconnect();\n    };\n  }, [projectName, pjpassword]);\n  const handleCodeChange = newCode => {\n    setCode(newCode);\n\n    // Emit the code change to the server\n    if (socket) {\n      socket.emit('codeChange', {\n        code: newCode,\n        projectName,\n        pjpassword\n      });\n    }\n  };\n  const fetchProjectCode = async () => {\n    const token = localStorage.getItem('token');\n    const config = {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    };\n    try {\n      const response = await axios.get(`http://localhost:5000/api/projects/${projectName}/${pjpassword}`, config);\n      setCode(response.data.code);\n    } catch (error) {\n      console.error('Error fetching project code:', error);\n      alert('Error fetching project data');\n    }\n  };\n  useEffect(() => {\n    fetchProjectCode();\n  }, [projectName, pjpassword]);\n  const saveCode = async () => {\n    const token = localStorage.getItem('token');\n    const config = {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    };\n    try {\n      await axios.post(`/projects/saveCode/${projectName}`, {\n        code\n      }, config);\n      alert('Code saved successfully!');\n    } catch (error) {\n      console.error('Error saving code:', error);\n      alert('Failed to save code');\n    }\n  };\n  const unsaveCode = async () => {\n    const token = localStorage.getItem('token');\n    const config = {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    };\n    try {\n      await axios.post(`/projects/unsaveCode/${projectName}`, {}, config);\n      alert('Code unsaved successfully!');\n    } catch (error) {\n      console.error('Error unsaving code:', error);\n      alert('Failed to unsave code');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Editor for \", projectName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: code,\n      onChange: e => handleCodeChange(e.target.value),\n      rows: \"20\",\n      cols: \"100\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveCode,\n        children: \"Save Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: unsaveCode,\n        children: \"Unsave Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n_s(Editor, \"4+BnAzBYQuYhs8cTE9LvHoav9aU=\", false, function () {\n  return [useParams];\n});\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","io","jsxDEV","_jsxDEV","Editor","_s","projectName","pjpassword","code","setCode","socket","setSocket","newSocket","emit","on","newCode","disconnect","handleCodeChange","fetchProjectCode","token","localStorage","getItem","config","headers","response","get","data","error","console","alert","saveCode","post","unsaveCode","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","rows","cols","onClick","_c","$RefreshReg$"],"sources":["C:/project final/frontend/src/components/Editor.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\n\r\nconst Editor = () => {\r\n    const { projectName, pjpassword } = useParams();\r\n    const [code, setCode] = useState('');\r\n    const [socket, setSocket] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const newSocket = io('http://localhost:5000'); // adjust if needed\r\n        setSocket(newSocket);\r\n\r\n        // Join the project room\r\n        newSocket.emit('joinProject', { projectName, pjpassword });\r\n\r\n        // Listen for code updates\r\n        newSocket.on('codeUpdate', (newCode) => {\r\n            setCode(newCode);\r\n        });\r\n\r\n        return () => {\r\n            newSocket.disconnect();\r\n        };\r\n    }, [projectName, pjpassword]);\r\n\r\n    const handleCodeChange = (newCode) => {\r\n        setCode(newCode);\r\n\r\n        // Emit the code change to the server\r\n        if (socket) {\r\n            socket.emit('codeChange', { code: newCode, projectName, pjpassword });\r\n        }\r\n    };\r\n\r\n    const fetchProjectCode = async () => {\r\n        const token = localStorage.getItem('token');\r\n        const config = {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        };\r\n\r\n        try {\r\n            const response = await axios.get(`http://localhost:5000/api/projects/${projectName}/${pjpassword}`, config);\r\n            setCode(response.data.code);\r\n        } catch (error) {\r\n            console.error('Error fetching project code:', error);\r\n            alert('Error fetching project data');\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProjectCode();\r\n    }, [projectName, pjpassword]);\r\n\r\n    const saveCode = async () => {\r\n        const token = localStorage.getItem('token');\r\n        const config = {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        };\r\n\r\n        try {\r\n            await axios.post(`/projects/saveCode/${projectName}`, { code }, config);\r\n            alert('Code saved successfully!');\r\n        } catch (error) {\r\n            console.error('Error saving code:', error);\r\n            alert('Failed to save code');\r\n        }\r\n    };\r\n\r\n    const unsaveCode = async () => {\r\n        const token = localStorage.getItem('token');\r\n        const config = {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        };\r\n\r\n        try {\r\n            await axios.post(`/projects/unsaveCode/${projectName}`, {}, config);\r\n            alert('Code unsaved successfully!');\r\n        } catch (error) {\r\n            console.error('Error unsaving code:', error);\r\n            alert('Failed to unsave code');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Editor for {projectName}</h1>\r\n            <textarea \r\n                value={code}\r\n                onChange={(e) => handleCodeChange(e.target.value)}\r\n                rows=\"20\" \r\n                cols=\"100\"\r\n            />\r\n            <div>\r\n                <button onClick={saveCode}>Save Code</button>\r\n                <button onClick={unsaveCode}>Unsave Code</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Editor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}